mutation upsertDailyItemizedReports(
  $year_month:String!, 
  $day:String!, 
  $employees_id:Int!, 
  $operation_id:Int!, 
  $operation_time:DateTime!, 
  $start_time:DateTime!, 
  $end_time:DateTime!,
  $work_time:DateTime!) 
{
  UpsertDailyItemizedReports(
  	where:{
      year_month_day_employees_id_operation_id: {
        year_month:$year_month,
        day:$day,
        employees_id:$employees_id,
        operation_id:$operation_id
      }
  	}, 
    create:{
      operation_time:$operation_time,
      operation: {
        connect: {
          operation_id: $operation_id
        }
      },
      daily_reports: {
        connectOrCreate: {
          where: {
            year_month_day_employees_id :{
       				year_month:$year_month,
     					day:$day,
              employees_id:$employees_id
            }
          },
          create: {
            start_time:$start_time,
            end_time:$end_time,
            work_time:$work_time,
            employees:{
              connect: {
                employees_id:$employees_id
              }
            },
            calendar: {
              connect: {
                year_month_day: {
                  year_month: $year_month,
                  day:$day
                }
              }
            }
          }
        }
      }
    },
    update:{
      operation_time:{set:$operation_time},
      operation: {
        connect: {
          operation_id: $operation_id
        }
      },
      daily_reports:{
        upsert:{
          create:{
            start_time:$start_time,
            end_time:$end_time,
            work_time:$work_time,
          	employees:{
              connect: {
                employees_id:$employees_id
              }
            },
            calendar: {
              connect: {
                year_month_day: {
                  year_month: $year_month,
                  day:$day
                }
              }
            }
          },
          update:{
            start_time:{set:$start_time},
            end_time:{set:$end_time},
            work_time:{set:$work_time},
          	employees:{
              connect: {
                employees_id:$employees_id
              }
            },
            calendar: {
              connect: {
                year_month_day: {
                  year_month: $year_month,
                  day:$day
                }
              }
            }
          }
        }
      }
    }
  ) {
  	year_month
    day
    employees_id
    operation_id
    operation_time
  }
}